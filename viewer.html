<html>
    <head>
        <meta charset="utf-8"/>
        <style>
            body {
                font-family: Arial, Helvetica, sans-serif;
                font-size: 80%;
            }
            .legend {
                text-align: center;
                font-style: italic;
            }
            .plot-container {
              border: 10px inset #f0f0f0;
              width: 100%;
              height: 100%;
              resize: both;
              overflow: auto;
            }

        </style>
        <script src="js/chains.js"></script>
        <script src="js/factors.js"></script>
        <script src="js/svg.js"></script>
        <script src="js/ui.js"></script>

        <script type="text/javascript" src="js/x3dom-full.js"></script>
        <link rel="stylesheet" type="text/html" href="js/x3dom.css"/>

        <script type="text/javascript" src="js/3d.js"></script>

        <script>
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);

            const base = urlParams.has('base') ? Number( urlParams.get('base') ) : 2;
            const mult = urlParams.has('mult') ? Number( urlParams.get('mult') ) : 2;

            var x3domContainerId =  'testContainer001';

            function plotChainSystem( containerId ) {

                const sceneRootId = `${ containerId }_plot_scene_root`;
                const sceneRoot = document.getElementById( sceneRootId );

                var items = getChainSystemItems( getChainSystem( base, mult ) );

                for ( var i = 0; i < items.length; i++ ) {
                    var item = items[i];
                    sceneRoot.appendChild( item );
                }


                var x3DomId = `${ containerId }_plot`;
                var x3Dom = document.getElementById( x3DomId );
                //x3Dom.runtime.resetView();
                //x3Dom.runtime.showAll();

                var x3DomNavId = `${ containerId }_plot_navType`;
                var x3DomNav = document.getElementById( x3DomNavId );
                x3DomNav.setAttribute( "type", "fly" );

            }
        </script>

    </head>
    <body onload="plotChainSystem( x3domContainerId )" id="testContainer001">
        <x3d id="testContainer001_plot" showStat="false" width="100%" height="100%">
            <navigationInfo type='"walk" "any"' id="testContainer001_plot_navType"></navigationInfo>
            <scene>
                <transform id="testContainer001_plot_scene_root" translation="0 0 0" rotation="0,-1,0,1.5708"></transform>
            </scene>
        </x3d>
    </body>
</html>
